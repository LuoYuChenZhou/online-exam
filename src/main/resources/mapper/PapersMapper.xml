<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lycz.dao.PapersMapper">
  <resultMap id="BaseResultMap" type="com.lycz.model.Papers">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="examiner_id" jdbcType="VARCHAR" property="examinerId" />
    <result column="papers_name" jdbcType="VARCHAR" property="papersName" />
    <result column="exam_time" jdbcType="INTEGER" property="examTime" />
    <result column="full_score" jdbcType="INTEGER" property="fullScore" />
    <result column="correct_type" jdbcType="VARCHAR" property="correctType" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="status" jdbcType="VARCHAR" property="status" />
  </resultMap>
  <select id="searchExaminationName" resultType="hashMap">
    SELECT
    p.papers_name AS papersName,
    p.exam_time AS examTime,
    p.full_score AS fullScore,
    p.status AS sataus,
    count(* ) AS numberOf
    FROM
    papers p
    LEFT JOIN score s ON p.id = s.paper_id
    <where>
      <if test=' papersName != null and papersName !="" '>
        and  p.papers_name = #{papersName} and
      </if>
        p.examiner_id = #{teachersId}
    </where>

  </select>
</mapper>